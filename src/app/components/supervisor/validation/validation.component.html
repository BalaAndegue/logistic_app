<div class="validation-container">
  <div class="header-section mb-4">
    <h2>Delivery Validation</h2>
    <p class="text-secondary">Select a pending delivery to review details and confirm completion.</p>
  </div>

  <div class="validation-layout shadow-sm rounded-4">
    <div class="list-sidebar">
      <div class="sidebar-header">
        <span>PENDING ORDERS ({{ pendingDeliveries.length }})</span>
      </div>
      
      <div class="scrollable-list">
        <div *ngIf="loading" class="text-center p-4">
          <div class="spinner-border spinner-border-sm text-primary"></div>
        </div>

        <div *ngFor="let del of pendingDeliveries" 
             (click)="onSelectDelivery(del)"
             [class.active]="selectedDelivery?.id === del.id"
             class="delivery-item">
          <div class="d-flex justify-content-between">
            <span class="order-ref">{{ del.order_number }}</span>
            <span class="badge status-pending">Pending</span>
          </div>
          <div class="item-meta">
            <i class="bi bi-person"></i> {{ del.customer_name }}
          </div>
        </div>
      </div>
    </div>

    <div class="detail-view bg-light">
      <div *ngIf="selectedDelivery; else placeholderTpl" class="p-4">
        <div class="detail-header mb-4 d-flex justify-content-between align-items-center">
          <div>
            <h4 class="m-0">Details for {{ selectedDelivery.order_number }}</h4>
            <span class="text-muted small">Reference ID: #{{ selectedDelivery.id }}</span>
          </div>
          <div *ngIf="processing" class="spinner-border text-primary"></div>
        </div>

        <div class="row g-3">
          <div class="col-md-6">
            <div class="info-card h-100">
              <label>Customer Details</label>
              <h5>{{ selectedDelivery.customer_name }}</h5>
              <p><i class="bi bi-envelope"></i> {{ selectedDelivery.customer_email }}</p>
              <p><i class="bi bi-telephone"></i> {{ selectedDelivery.customer_phone }}</p>
            </div>
          </div>

          <div class="col-md-6">
            <div class="info-card h-100">
              <label>Destination</label>
              <h5>{{ selectedDelivery.shipping_city }}</h5>
              <p><i class="bi bi-geo-alt"></i> {{ selectedDelivery.shipping_address }}</p>
              <p><i class="bi bi-hash"></i> Zip: {{ selectedDelivery.shipping_zipcode }}</p>
            </div>
          </div>

          <div class="col-12">
            <div class="info-card">
              <label>Order Content</label>
              <div class="d-flex justify-content-between align-items-center mt-2">
                <div>
                  <h6 class="mb-0">Total Package Value</h6>
                  <span class="text-muted small">Items value plus shipping</span>
                </div>
                <h4 class="text-primary m-0">{{ selectedDelivery.total }} CFA</h4>
              </div>
            </div>
          </div>
        </div>

        <div class="action-bar mt-4">
          <button class="btn btn-success" (click)="confirmValidation()" [disabled]="processing">
            <i class="bi bi-check-lg"></i> Confirm Delivery (EN_ROUTE)
          </button>
          <button class="btn btn-outline-danger" (click)="rejectValidation()" [disabled]="processing">
            <i class="bi bi-x-lg"></i> Flag Issue (CANCELLED)
          </button>
        </div>
      </div>

      <ng-template #placeholderTpl>
        <div class="placeholder-state">
          <div class="placeholder-icon"><i class="bi bi-card-checklist"></i></div>
          <h4>No Delivery Selected</h4>
          <p>Please select an order from the list on the left to review the proof and validate the delivery.</p>
        </div>
      </ng-template>
    </div>
  </div>
</div>